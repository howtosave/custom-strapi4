"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[801],{24754:(gn,q,a)=>{a.r(q),a.d(q,{default:()=>pn});var t=a(32735),i=a(484),be=a(84968),Le=a(33795),Ne=a.n(Le);const _={i8:"4.4.5"};var k=a(55187),f=a(5141),G=a(4409),Ge=a(74506),Be=a(51968),Fe=a(88311),ee=a.n(Fe);const je={contentTypeBuilder:{home:{title:{id:"app.components.GuidedTour.home.CTB.title",defaultMessage:"\u{1F9E0} Build the content structure"},cta:{title:{id:"app.components.GuidedTour.home.CTB.cta.title",defaultMessage:"Go to the Content type Builder"},type:"REDIRECT",target:"/plugins/content-type-builder"},trackingEvent:"didClickGuidedTourHomepageContentTypeBuilder"},create:{title:{id:"app.components.GuidedTour.CTB.create.title",defaultMessage:"\u{1F9E0} Create a first Collection type"},content:{id:"app.components.GuidedTour.CTB.create.content",defaultMessage:"<p>Collection types help you manage several entries, Single types are suitable to manage only one entry.</p> <p>Ex: For a Blog website, Articles would be a Collection type whereas a Homepage would be a Single type.</p>"},cta:{title:{id:"app.components.GuidedTour.CTB.create.cta.title",defaultMessage:"Build a Collection type"},type:"CLOSE"},trackingEvent:"didClickGuidedTourStep1CollectionType"},success:{title:{id:"app.components.GuidedTour.CTB.success.title",defaultMessage:"Step 1: Completed \u2705"},content:{id:"app.components.GuidedTour.CTB.success.content",defaultMessage:"<p>Good going!</p><b>\u26A1\uFE0F What would you like to share with the world?</b>"},cta:{title:{id:"app.components.GuidedTour.create-content",defaultMessage:"Create content"},type:"REDIRECT",target:"/content-manager"},trackingEvent:"didCreateGuidedTourCollectionType"}},contentManager:{home:{title:{id:"app.components.GuidedTour.home.CM.title",defaultMessage:"\u26A1\uFE0F What would you like to share with the world?"},cta:{title:{id:"app.components.GuidedTour.create-content",defaultMessage:"Create content"},type:"REDIRECT",target:"/content-manager"},trackingEvent:"didClickGuidedTourHomepageContentManager"},create:{title:{id:"app.components.GuidedTour.CM.create.title",defaultMessage:"\u26A1\uFE0F Create content"},content:{id:"app.components.GuidedTour.CM.create.content",defaultMessage:"<p>Create and manage all the content here in the Content Manager.</p><p>Ex: Taking the Blog website example further, one can write an Article, save and publish it as they like.</p><p>\u{1F4A1} Quick tip - Don't forget to hit publish on the content you create.</p>"},cta:{title:{id:"app.components.GuidedTour.create-content",defaultMessage:"Create content"},type:"CLOSE"},trackingEvent:"didClickGuidedTourStep2ContentManager"},success:{title:{id:"app.components.GuidedTour.CM.success.title",defaultMessage:"Step 2: Completed \u2705"},content:{id:"app.components.GuidedTour.CM.success.content",defaultMessage:"<p>Awesome, one last step to go!</p><b>\u{1F680}  See content in action</b>"},cta:{title:{id:"app.components.GuidedTour.CM.success.cta.title",defaultMessage:"Test the API"},type:"REDIRECT",target:"/settings/api-tokens"},trackingEvent:"didCreateGuidedTourEntry"}},apiTokens:{home:{title:{id:"app.components.GuidedTour.apiTokens.create.title",defaultMessage:"\u{1F680} See content in action"},cta:{title:{id:"app.components.GuidedTour.home.apiTokens.cta.title",defaultMessage:"Test the API"},type:"REDIRECT",target:"/settings/api-tokens"},trackingEvent:"didClickGuidedTourHomepageApiTokens"},create:{title:{id:"app.components.GuidedTour.apiTokens.create.title",defaultMessage:"\u{1F680} See content in action"},content:{id:"app.components.GuidedTour.apiTokens.create.content",defaultMessage:"<p>Generate an authentication token here and retrieve the content you just created.</p>"},cta:{title:{id:"app.components.GuidedTour.apiTokens.create.cta.title",defaultMessage:"Generate an API Token"},type:"CLOSE"},trackingEvent:"didClickGuidedTourStep3ApiTokens"},success:{title:{id:"app.components.GuidedTour.apiTokens.success.title",defaultMessage:"Step 3: Completed \u2705"},content:{id:"app.components.GuidedTour.apiTokens.success.content",defaultMessage:"<p>See content in action by making an HTTP request:</p><ul><li><p>To this URL: <light>https://'<'YOUR_DOMAIN'>'/api/'<'YOUR_CT'>'</light></p></li><li><p>With the header: <light>Authorization: bearer '<'YOUR_API_TOKEN'>'</light></p></li></ul><p>For more ways to interact with content, see the <documentationLink>documentation</documentationLink>.</p>"},trackingEvent:"didGenerateGuidedTourApiTokens"}}};var P=a(19615),De=a(60216),s=a.n(De),M=a(5636),ke=a(64410),$=a(54742),h=a(19192),E=a(9808),U=a(90662),$e=a(20763),te=a(44526),Ue=a(94009),we=a.n(Ue);const We=(0,P.default)(h.Flex)`
  position: fixed;
  z-index: 4;
  inset: 0;
  /* this is theme.colors.neutral800 with opacity */
  background: ${({theme:e})=>`${e.colors.neutral800}1F`};
`,ne=({onClose:e,onSkip:n,children:o,hideSkip:r})=>{const{formatMessage:d}=(0,M.useIntl)();return t.createElement(ke.Portal,null,t.createElement(We,{onClick:e,padding:8,justifyContent:"center"},t.createElement($.FocusTrap,{onEscape:e},t.createElement(U.Stack,{background:"neutral0",width:(0,i.pxToRem)(660),shadow:"popupShadow",hasRadius:!0,padding:4,spacing:8,role:"dialog","aria-modal":!0,onClick:l=>l.stopPropagation()},t.createElement(h.Flex,{justifyContent:"flex-end"},t.createElement($e.IconButton,{onClick:e,"aria-label":d({id:"app.utils.close-label",defaultMessage:"Close"}),icon:t.createElement(we(),null)})),t.createElement(E.Box,{paddingLeft:7,paddingRight:7,paddingBottom:r?8:0},o),!r&&t.createElement(h.Flex,{justifyContent:"flex-end"},t.createElement(te.Button,{variant:"tertiary",onClick:n},d({id:"app.components.GuidedTour.skip",defaultMessage:"Skip the tour"})))))))};ne.propTypes={children:s().node.isRequired,onClose:s().func.isRequired,onSkip:s().func.isRequired,hideSkip:s().bool.isRequired};const ze=ne;var oe=a(49415);const ae={stepContent:null,sectionIndex:null,stepIndex:null,hasSectionAfter:!1,hasStepAfter:!1},Ve=(e=ae,n)=>(0,oe.default)(e,o=>{switch(n.type){case"UPDATE_MODAL":{o.stepContent=n.content,o.sectionIndex=n.newSectionIndex,o.stepIndex=n.newStepIndex,o.hasSectionAfter=n.newHasSectionAfter,o.hasStepAfter=n.newHasStepAfter;break}default:return o}});var y=a(95602),He=a(30345),re=a.n(He);const Ke=P.default.li`
  list-style: disc;
`,se=({id:e,defaultMessage:n})=>{const{formatMessage:o}=(0,M.useIntl)();return t.createElement(U.Stack,{spacing:4,paddingBottom:6},o({id:e,defaultMessage:n},{documentationLink:r=>t.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/rest-api.html#api-parameters"},r),b:r=>t.createElement(y.Typography,{fontWeight:"semiBold"},r),p:r=>t.createElement(y.Typography,null,r),light:r=>t.createElement(y.Typography,{textColor:"neutral600"},r),ul:r=>t.createElement(E.Box,{paddingLeft:6},t.createElement("ul",null,r)),li:r=>t.createElement(Ke,null,r)}))};se.propTypes={id:s().string.isRequired,defaultMessage:s().string.isRequired};const Qe=se,I="isActive",x="isDone",O="isNotDone";var Ye=Object.defineProperty,B=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ce=(e,n,o)=>n in e?Ye(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Je=(e,n)=>{for(var o in n||(n={}))ie.call(n,o)&&ce(e,o,n[o]);if(B)for(var o of B(n))le.call(n,o)&&ce(e,o,n[o]);return e},Ze=(e,n)=>{var o={};for(var r in e)ie.call(e,r)&&n.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&B)for(var r of B(e))n.indexOf(r)<0&&le.call(e,r)&&(o[r]=e[r]);return o};const w=e=>{var n=e,{type:o}=n,r=Ze(n,["type"]);return t.createElement(E.Box,Je({width:(0,i.pxToRem)(2),height:"100%",background:o===O?"neutral300":"primary500",hasRadius:!0},r))};w.defaultProps={type:O},w.propTypes={type:s().oneOf([I,x,O])};const W=w;var Xe=a(78752),qe=a(88677),_e=a.n(qe);const z=({type:e,number:n})=>e===x?t.createElement(h.Flex,{background:"primary600",padding:2,borderRadius:"50%",width:(0,i.pxToRem)(30),height:(0,i.pxToRem)(30),justifyContent:"center"},t.createElement(Xe.Icon,{as:_e(),"aria-hidden":!0,width:(0,i.pxToRem)(16),color:"neutral0"})):e===I?t.createElement(h.Flex,{background:"primary600",padding:2,borderRadius:"50%",width:(0,i.pxToRem)(30),height:(0,i.pxToRem)(30),justifyContent:"center"},t.createElement(y.Typography,{fontWeight:"semiBold",textColor:"neutral0"},n)):t.createElement(h.Flex,{borderColor:"neutral500",borderWidth:"1px",borderStyle:"solid",padding:2,borderRadius:"50%",width:(0,i.pxToRem)(30),height:(0,i.pxToRem)(30),justifyContent:"center"},t.createElement(y.Typography,{fontWeight:"semiBold",textColor:"neutral600"},n));z.defaultProps={number:void 0,type:O},z.propTypes={number:s().number,type:s().oneOf([I,x,O])};const et=z,V=({number:e,last:n,type:o})=>t.createElement(E.Box,{paddingTop:3,paddingBottom:n?0:3},t.createElement(et,{number:e,type:o}));V.defaultProps={number:void 0,last:!1,type:""},V.propTypes={number:s().number,last:s().bool,type:s().string};const de=V;var tt=Object.defineProperty,ue=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,pe=(e,n,o)=>n in e?tt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,at=(e,n)=>{for(var o in n||(n={}))nt.call(n,o)&&pe(e,o,n[o]);if(ue)for(var o of ue(n))ot.call(n,o)&&pe(e,o,n[o]);return e};const H=({title:e,content:n,cta:o,onCtaClick:r,sectionIndex:d,stepIndex:l,hasSectionAfter:m})=>{const{formatMessage:g}=(0,M.useIntl)(),p=d>0,c=l>0,T=d+1;return t.createElement(t.Fragment,null,t.createElement(h.Flex,{alignItems:"stretch"},t.createElement(h.Flex,{marginRight:8,justifyContent:"center",minWidth:(0,i.pxToRem)(30)},p&&t.createElement(W,{type:x,minHeight:(0,i.pxToRem)(24)})),t.createElement(y.Typography,{variant:"sigma",textColor:"primary600"},g({id:"app.components.GuidedTour.title",defaultMessage:"3 steps to get started"}))),t.createElement(h.Flex,null,t.createElement(h.Flex,{marginRight:8,minWidth:(0,i.pxToRem)(30)},t.createElement(de,{number:d+1,type:c?x:I})),t.createElement(y.Typography,{variant:"alpha",fontWeight:"bold",textColor:"neutral800",as:"h3",id:"title"},g(e))),t.createElement(h.Flex,{alignItems:"stretch"},t.createElement(h.Flex,{marginRight:8,direction:"column",justifyContent:"center",minWidth:(0,i.pxToRem)(30)},m&&t.createElement(t.Fragment,null,t.createElement(W,{type:x}),c&&t.createElement(de,{number:T+1,type:I,last:!0}))),t.createElement(E.Box,null,t.createElement(Qe,at({},n)),o&&(o.target?t.createElement(i.LinkButton,{endIcon:t.createElement(re(),null),onClick:r,to:o.target},g(o.title)):t.createElement(te.Button,{endIcon:t.createElement(re(),null),onClick:r},g(o.title))))),c&&m&&t.createElement(E.Box,{paddingTop:3},t.createElement(h.Flex,{marginRight:8,justifyContent:"center",width:(0,i.pxToRem)(30)},t.createElement(W,{type:x,minHeight:(0,i.pxToRem)(24)}))))};H.defaultProps={currentStep:null,cta:void 0},H.propTypes={sectionIndex:s().number.isRequired,stepIndex:s().number.isRequired,hasSectionAfter:s().bool.isRequired,content:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}).isRequired,cta:s().shape({target:s().string,title:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired})}),currentStep:s().string,onCtaClick:s().func.isRequired,title:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}).isRequired};const rt=H;var st=Object.defineProperty,it=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ge=(e,n,o)=>n in e?st(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ut=(e,n)=>{for(var o in n||(n={}))ct.call(n,o)&&ge(e,o,n[o]);if(me)for(var o of me(n))dt.call(n,o)&&ge(e,o,n[o]);return e},pt=(e,n)=>it(e,lt(n));const mt=()=>{const{currentStep:e,guidedTourState:n,setCurrentStep:o,setStepState:r,isGuidedTourVisible:d,setSkipped:l}=(0,i.useGuidedTour)(),[m,g]=(0,t.useState)(e),[{stepContent:p,sectionIndex:c,stepIndex:T,hasSectionAfter:R,hasStepAfter:b},L]=(0,t.useReducer)(Ve,ae),{trackUsage:A}=(0,i.useTracking)();(0,t.useEffect)(()=>{if(!e){g(!1);return}const[C]=ee()(n,e);g(!C&&d)},[e,n,d]),(0,t.useEffect)(()=>{if(e){const[C]=ee()(je,e),N=Object.keys(n),[j,J]=e.split("."),D=N.indexOf(j),Z=Object.keys(n[j]).indexOf(J),X=D<N.length-1,mn=Z<Object.keys(n[j]).length-1;L({type:"UPDATE_MODAL",content:C,newSectionIndex:D,newStepIndex:Z,newHasSectionAfter:X,newHasStepAfter:mn})}},[e,n]);const u=()=>{r(e,!0),A(p.trackingEvent),o(null)},S=()=>{l(!0),o(null),A("didSkipGuidedtour")};return m&&p?t.createElement(ze,{hideSkip:!b&&!R,onSkip:S,onClose:u},t.createElement(rt,pt(ut({},p),{onCtaClick:u,currentStep:e,sectionIndex:c,stepIndex:T,hasSectionAfter:R}))):null};var gt=a(27635),v=a(34499),ft=a(82926),ht=a.n(ft),yt=a(70258),Et=a.n(yt),vt=a(2596);const Tt=(0,P.default)(E.Box)`
  width: ${150/16}rem;
  position: absolute;
  bottom: ${({theme:e})=>e.spaces[9]};
  left: ${({theme:e})=>e.spaces[5]};
`,fe=(0,P.default)(f.NavLink)`
  display: flex;
  justify-content: space-between;
  align-items: center;
  text-decoration: none;
  padding: ${({theme:e})=>`${e.spaces[2]} ${e.spaces[4]}`};
  border-radius: ${({theme:e})=>e.spaces[1]};

  &:hover {
    background: ${({theme:e,logout:n})=>n?e.colors.danger100:e.colors.primary100};
    text-decoration: none;
  }

  svg {
    path {
      fill: ${({theme:e})=>e.colors.danger600};
    }
  }
`,he=({generalSectionLinks:e,pluginsSectionLinks:n})=>{const o=(0,t.useRef)(),[r,d]=(0,t.useState)(!1),{logos:{menu:l}}=(0,vt.Z)(),[m,g]=(0,i.usePersistentState)("navbar-condensed",!1),{userDisplayName:p}=(0,i.useAppInfos)(),{formatMessage:c}=(0,M.useIntl)(),T=p.split(" ").map(u=>u.substring(0,1)).join("").substring(0,2),R=()=>d(u=>!u),b=()=>{i.auth.clearAppStorage(),R()},L=u=>{var S,C;!u.currentTarget.contains(u.relatedTarget)&&((C=(S=u.relatedTarget)==null?void 0:S.parentElement)==null?void 0:C.id)!=="main-nav-user-button"&&d(!1)},A=c({id:"app.components.LeftMenu.navbrand.title",defaultMessage:"Dashboard"});return t.createElement(v.MainNav,{condensed:m},t.createElement(v.NavBrand,{as:f.NavLink,workplace:c({id:"app.components.LeftMenu.navbrand.workplace",defaultMessage:"Workplace"}),title:A,icon:t.createElement("img",{src:l.custom||l.default,alt:c({id:"app.components.LeftMenu.logo.alt",defaultMessage:"Application logo"})})}),t.createElement(gt.Divider,null),t.createElement(v.NavSections,null,t.createElement(v.NavLink,{as:f.NavLink,to:"/content-manager",icon:t.createElement(ht(),null)},c({id:"global.content-manager",defaultMessage:"Content manager"})),n.length>0?t.createElement(v.NavSection,{label:c({id:"app.components.LeftMenu.plugins",defaultMessage:"Plugins"})},n.map(u=>{const S=u.icon;return t.createElement(v.NavLink,{as:f.NavLink,to:u.to,key:u.to,icon:t.createElement(S,null)},c(u.intlLabel))})):null,e.length>0?t.createElement(v.NavSection,{label:c({id:"app.components.LeftMenu.general",defaultMessage:"General"})},e.map(u=>{const S=u.icon;return t.createElement(v.NavLink,{as:f.NavLink,badgeContent:u.notificationsCount>0&&u.notificationsCount.toString()||void 0,to:u.to,key:u.to,icon:t.createElement(S,null)},c(u.intlLabel))})):null),t.createElement(v.NavUser,{id:"main-nav-user-button",ref:o,onClick:R,initials:T},p),r&&t.createElement(Tt,{onBlur:L,padding:1,shadow:"tableShadow",background:"neutral0",hasRadius:!0},t.createElement($.FocusTrap,{onEscape:R},t.createElement(U.Stack,{spacing:0},t.createElement(fe,{tabIndex:0,onClick:R,to:"/me"},t.createElement(y.Typography,null,c({id:"global.profile",defaultMessage:"Profile"}))),t.createElement(fe,{tabIndex:0,onClick:b,logout:"logout",to:"/auth/login"},t.createElement(y.Typography,{textColor:"danger600"},c({id:"app.components.LeftMenu.logout",defaultMessage:"Logout"})),t.createElement(Et(),null))))),t.createElement(v.NavCondense,{onClick:()=>g(u=>!u)},c(m?{id:"app.components.LeftMenu.expand",defaultMessage:"Expand the navbar"}:{id:"app.components.LeftMenu.collapse",defaultMessage:"Collapse the navbar"})))};he.propTypes={generalSectionLinks:s().array.isRequired,pluginsSectionLinks:s().array.isRequired};const St=he;var Ct=a(16540);const Pt=(0,P.default)(E.Box)`
  flex: 1;
`,ye=({children:e,sideNav:n})=>{const{formatMessage:o}=(0,M.useIntl)();return t.createElement(E.Box,{background:"neutral100"},t.createElement(Ct.SkipToContent,null,o({id:"skipToContent",defaultMessage:"Skip to content"})),t.createElement(h.Flex,{alignItems:"flex-start"},n,t.createElement(Pt,null,e)))};ye.propTypes={children:s().node.isRequired,sideNav:s().node.isRequired};const Rt=ye;var Ee=a(2139),xt=a(33776),K=a(16925),ve=a(28257);const Mt=(0,P.default)(E.Box)`
  position: fixed;
  bottom: ${({theme:e})=>e.spaces[2]};
  right: ${({theme:e})=>e.spaces[2]};
`,At=P.default.button`
  width: ${({theme:e})=>e.spaces[8]};
  height: ${({theme:e})=>e.spaces[8]};
  background: ${({theme:e})=>e.colors.primary600};
  box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  border-radius: 50%;
  svg {
    color: ${({theme:e})=>e.colors.buttonNeutral0};
  }
`,It=(0,P.default)(E.Box)`
  position: absolute;
  bottom: ${({theme:e})=>`${e.spaces[9]}`};
  right: 0;
  width: ${200/16}rem;
`,Ot=P.default.a`
  display: flex;
  align-items: center;
  text-decoration: none;
  padding: ${({theme:e})=>e.spaces[2]};
  padding-left: ${({theme:e})=>e.spaces[5]};

  svg {
    color: ${({theme:e})=>e.colors.neutral600};
    margin-right: ${({theme:e})=>e.spaces[2]};
  }

  &:hover {
    background: ${({theme:e})=>e.colors.neutral100};
    color: ${({theme:e})=>e.colors.neutral500};

    svg {
      color: ${({theme:e})=>e.colors.neutral700};
    }

    ${[y.Typography]} {
      color: ${({theme:e})=>e.colors.neutral700};
    }
  }

  ${[y.Typography]} {
    color: ${({theme:e})=>e.colors.neutral600};
  }
`,bt=()=>{const[e,n]=(0,t.useState)(!1),{formatMessage:o}=(0,M.useIntl)(),{showTutorials:r}=(0,k.um)();if(!r)return null;const d=[{icon:"book",label:o({id:"global.documentation",defaultMessage:"Documentation"}),destination:"https://docs.strapi.io"},{icon:"file",label:o({id:"app.static.links.cheatsheet",defaultMessage:"CheatSheet"}),destination:"https://strapi-showcase.s3-us-west-2.amazonaws.com/CheatSheet.pdf"}],l=()=>{n(m=>!m)};return t.createElement(Mt,{as:"aside"},t.createElement(At,{id:"onboarding","aria-label":o({id:"app.components.Onboarding.help.button",defaultMessage:"Help button"}),onClick:l},!e&&t.createElement(K.G,{icon:ve.faQuestion}),e&&t.createElement(K.G,{icon:ve.faTimes})),e&&t.createElement($.FocusTrap,{onEscape:l},t.createElement(It,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingBottom:2,paddingTop:2},d.map(m=>t.createElement(Ot,{key:m.label,rel:"nofollow noreferrer noopener",target:"_blank",href:m.destination},t.createElement(K.G,{icon:m.icon}),t.createElement(y.Typography,null,m.label))))))},Lt=(0,t.lazy)(()=>Promise.all([a.e(8469),a.e(9420),a.e(4982),a.e(1669),a.e(8773),a.e(994)]).then(a.bind(a,55441))),Nt=(0,t.lazy)(()=>a.e(3981).then(a.bind(a,35872))),Gt=(0,t.lazy)(()=>a.e(3677).then(a.bind(a,20321))),Bt=(0,t.lazy)(()=>Promise.all([a.e(8469),a.e(5516)]).then(a.bind(a,50653))),Te=(0,t.lazy)(()=>Promise.resolve().then(a.bind(a,48028))),Ft=(0,t.lazy)(()=>a.e(9501).then(a.bind(a,54685))),jt=(0,t.lazy)(()=>a.e(9497).then(a.bind(a,9051))),Se=(0,t.lazy)(()=>Promise.all([a.e(8469),a.e(9420),a.e(4982),a.e(4414),a.e(5895)]).then(a.bind(a,27948))),Dt=()=>{const{trackUsage:e}=(0,i.useTracking)(),n=(0,G.useDispatch)(),o=(0,G.useSelector)(r=>r.admin_app.status);(0,t.useEffect)(()=>{o==="init"&&(e("didAccessAuthenticatedAdministration"),n({type:xt.e}))},[o])},kt=()=>{Dt();const{isLoading:e,generalSectionLinks:n,pluginsSectionLinks:o}=(0,k.H9)(),{menu:r}=(0,i.useStrapiApp)(),d=(0,t.useMemo)(()=>r.filter(l=>l.Component).map(({to:l,Component:m,exact:g})=>(0,Ee.ot)(m,l,g)),[r]);return e?t.createElement(i.LoadingIndicatorPage,null):t.createElement(Ge.DndProvider,{backend:Be.PD},t.createElement(Rt,{sideNav:t.createElement(St,{generalSectionLinks:n,pluginsSectionLinks:o})},t.createElement(t.Suspense,{fallback:t.createElement(i.LoadingIndicatorPage,null)},t.createElement(f.Switch,null,t.createElement(f.Route,{path:"/",component:Nt,exact:!0}),t.createElement(f.Route,{path:"/me",component:jt,exact:!0}),t.createElement(f.Route,{path:"/content-manager",component:Lt}),d,t.createElement(f.Route,{path:"/settings/:settingId",component:Se}),t.createElement(f.Route,{path:"/settings",component:Se,exact:!0}),t.createElement(f.Route,{path:"/marketplace"},t.createElement(Bt,null)),t.createElement(f.Route,{path:"/list-plugins",exact:!0},t.createElement(Gt,null)),t.createElement(f.Route,{path:"/404",component:Te}),t.createElement(f.Route,{path:"/500",component:Ft}),t.createElement(f.Route,{path:"",component:Te}))),t.createElement(mt,null),t.createElement(bt,null)))};var $t=Object.defineProperty,Ce=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,Pe=(e,n,o)=>n in e?$t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Wt=(e,n)=>{for(var o in n||(n={}))Ut.call(n,o)&&Pe(e,o,n[o]);if(Ce)for(var o of Ce(n))wt.call(n,o)&&Pe(e,o,n[o]);return e};const zt=e=>({plugins:Object.keys(e).reduce((n,o)=>(n[o]=Wt({},e[o]),n),{})});var Vt=a(3040),Ht=a.n(Vt);const Re={plugins:null},Kt=(e=Re,n)=>(0,oe.default)(e,o=>{switch(n.type){case"SET_PLUGIN_READY":{Ht()(o,["plugins",n.pluginId,"isReady"],!0);break}default:return o}}),Qt=()=>{const{plugins:e}=(0,i.useStrapiApp)(),[{plugins:n},o]=(0,t.useReducer)(Kt,Re,()=>zt(e)),r=(0,t.useRef)(l=>{o({type:"SET_PLUGIN_READY",pluginId:l})});if(Object.keys(n).some(l=>n[l].isReady===!1)){const l=Object.keys(n).reduce((m,g)=>{const p=n[g].initializer;if(p){const c=n[g].pluginId;m.push(t.createElement(p,{key:c,setPlugin:r.current}))}return m},[]);return t.createElement(t.Fragment,null,l,t.createElement(i.LoadingIndicatorPage,null))}return t.createElement(kt,null)};var xe=a(24257);const Yt=()=>({type:xe.l}),Jt=e=>({type:xe.m,permissions:e}),Me=({children:e,permissions:n,refetchPermissions:o})=>{const{allPermissions:r}=(0,G.useSelector)(l=>l.rbacProvider),d=(0,G.useDispatch)();return(0,t.useEffect)(()=>(d(Jt(n)),()=>{d(Yt())}),[n,d]),r?t.createElement(i.RBACProviderContext.Provider,{value:{allPermissions:r,refetchPermissions:o}},e):t.createElement(i.LoadingIndicatorPage,null)};Me.propTypes={children:s().element.isRequired,permissions:s().array.isRequired,refetchPermissions:s().func.isRequired};const Zt=Me;var Pn=a(43653),Xt=a(54770),Q=a.n(Xt);const qt=(e,n)=>!Q().valid(e)||!Q().valid(n)?!1:Q().lt(e,n);var Y=a(49986),F=(e,n,o)=>new Promise((r,d)=>{var l=p=>{try{g(o.next(p))}catch(c){d(c)}},m=p=>{try{g(o.throw(p))}catch(c){d(c)}},g=p=>p.done?r(p.value):Promise.resolve(p.value).then(l,m);g((o=o.apply(e,n)).next())});const _t=_.i8,xn=!JSON.parse(localStorage.getItem("STRAPI_UPDATE_NOTIF")),en=e=>F(void 0,null,function*(){return _t}),tn=()=>F(void 0,null,function*(){try{const{data:e,headers:n}=yield Y.be.get("/admin/information");if(!n["content-type"].includes("application/json"))throw new Error("Not found");return e.data}catch(e){throw new Error(e)}}),nn=()=>F(void 0,null,function*(){try{const{data:e,headers:n}=yield Y.be.get("/admin/users/me/permissions");if(!n["content-type"].includes("application/json"))throw new Error("Not found");return e.data}catch(e){throw new Error(e)}}),on=()=>F(void 0,null,function*(){try{const{data:{data:{roles:e}}}=yield Y.be.get("/admin/users/me");return e}catch(e){throw new Error(e)}});var an=Object.defineProperty,rn=Object.defineProperties,sn=Object.getOwnPropertyDescriptors,Ae=Object.getOwnPropertySymbols,ln=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,Ie=(e,n,o)=>n in e?an(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,dn=(e,n)=>{for(var o in n||(n={}))ln.call(n,o)&&Ie(e,o,n[o]);if(Ae)for(var o of Ae(n))cn.call(n,o)&&Ie(e,o,n[o]);return e},un=(e,n)=>rn(e,sn(n));const Oe=_.i8,pn=()=>{const{setGuidedTourVisibility:e}=(0,i.useGuidedTour)(),n=(0,i.useNotification)(),o=(0,t.useRef)(e),r=i.auth.getUserInfo(),d=Ne()(r,"username")||(0,Ee.Pp)(r.firstname,r.lastname),[l,m]=(0,t.useState)(d),{showReleaseNotification:g}=(0,k.um)(),[{data:p,status:c},{data:T,isLoading:R},{data:b,status:L,refetch:A,isFetched:u,isFetching:S},{data:C}]=(0,be.useQueries)([{queryKey:"app-infos",queryFn:tn},{queryKey:"strapi-release",queryFn:()=>en(n),enabled:g,initialData:Oe},{queryKey:"admin-users-permission",queryFn:nn,initialData:[]},{queryKey:"user-roles",queryFn:on}]),N=(0,t.useMemo)(()=>qt(Oe,T),[T]);(0,t.useEffect)(()=>{C&&C.find(({code:X})=>X==="strapi-super-admin")&&(p==null?void 0:p.autoReload)&&o.current(!0)},[C,p]);const J=R||(S&&u||c==="loading"||L==="loading"),D=(0,t.useMemo)(()=>un(dn({},p),{latestStrapiReleaseTag:T,setUserDisplayName:m,shouldUpdateStrapi:N,userDisplayName:l}),[p,T,N,l]);return J?t.createElement(i.LoadingIndicatorPage,null):c==="error"?t.createElement("div",null,"error..."):t.createElement(i.AppInfosContext.Provider,{value:D},t.createElement(Zt,{permissions:b,refetchPermissions:A},t.createElement(Qt,null)))}}}]);
